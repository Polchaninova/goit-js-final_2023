{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,sDAMA,MAAMC,EAAsBC,SAASC,cAAc,0BAC7CC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iBAGxCF,EAAoBK,iBAAiB,SAOrC,SAAqBC,GAEnB,GADAA,EAAEC,iBACED,EAAEE,OAAOC,UAAUC,SAAS,WAAY,CAC1C,MAAMC,GAAEA,GAAOL,EAAEE,OAAOI,QAAQ,aAAaC,QAC7C,IAAIC,GAAQ,EAAAhB,EAAAiB,uBAAsBC,OAAOL,IACrCG,IACF,EAAAG,EAAAC,aAAYJ,E,KAXlBK,OAAOC,OAASC,iBACd,MAAMC,QAAuB,EAAAxB,EAAAyB,gBAC7BvB,EAAoBwB,gBAAkB,EAAAC,EAAAC,oBAAmBJ,E,EAc3DnB,EAAWE,iBAAiB,SAC5BgB,eAA8Bf,G,IAEZqB,EADhBrB,EAAEC,iBACF,MAAMqB,EAA8D,QAApDD,EAAAE,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,OAAOC,qBAAa,IAApDR,IAAwD,GACxE3B,EAAoBwB,gBAAkB,EAAAC,EAAAC,oBAAmBE,E,IAI3DxB,EAASC,iBAAiB,SAC1BgB,eAA4Bf,G,IAEZqB,EADdrB,EAAEC,iBACF,MAAM6B,EAA0D,QAAlDT,EAAAE,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,OAAOG,mBAAW,IAAlDV,IAAsD,GACpE3B,EAAoBwB,gBAAkB,EAAAC,EAAAC,oBAAmBU,E","sources":["src/library.js"],"sourcesContent":["import { findTrendInfoForMovie, loadTrending } from './js/findTrendInfo'\nimport { renderGenreMovies } from './js/genres'\nimport { createModal } from './js/modalRender'\nimport { createMarkupMovies } from './js/renderMarkup'\nimport { common } from './js/comon'\n\nconst containerCardMovies = document.querySelector('.container-card-movies')\nconst btnWatched = document.querySelector('.js-btn-watched')\nconst btnQueue = document.querySelector('.js-btn-queue')\n\n\ncontainerCardMovies.addEventListener('click', onClickCard)\n\nwindow.onload = async function () { //при загрузке страницы запустить сткрипт window.onload = вызов ф-и\n  const trendingMovies = await loadTrending()\n  containerCardMovies.innerHTML = await createMarkupMovies(trendingMovies);\n}\n\nfunction onClickCard(e) {\n  e.preventDefault()\n  if (e.target.classList.contains('js-info')) {\n    const { id } = e.target.closest('[data-id]').dataset;\n    let movie = findTrendInfoForMovie(Number(id));\n    if (movie) {\n      createModal(movie);\n    }\n  }\n}\n\nbtnWatched.addEventListener('click', onClickWatched);\nasync function onClickWatched(e) {\n  e.preventDefault();\n  const watched = JSON.parse(localStorage.getItem(common.KEY_WATCHED)) ?? [];\n  containerCardMovies.innerHTML = await createMarkupMovies(watched);\n}\n\n\nbtnQueue.addEventListener('click', onClickQueue);\nasync function onClickQueue(e) {\n  e.preventDefault();\n  const queue = JSON.parse(localStorage.getItem(common.KEY_QUEUE)) ?? [];\n  containerCardMovies.innerHTML = await createMarkupMovies(queue);\n}\n\n\n\n// async function createMarkupMovies(movies) {\n//   return (await Promise.all(movies.map(\n//     async ({ poster_path, title, genre_ids, release_date, id }) => {\n\n//       const UrlImg = poster_path// добавить заглушку если нет изображения!\n//         ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n//         : 'https://placehold.co/600x800'\n\n//       return `<div data-id='${id}' class=\"js-card flex\">\n//        <img class = \"img js-info\" src = \"${UrlImg}\" alt=\"${title}\">\n//        <div class=\"card-text\">\n//        <h2 class=\"title\">${title}</h2>\n//        <span class=\"text\">${await renderGenreMovies(genre_ids)}</span>\n//        <span class=\"text-d\">|</span>\n//        <span class=\"text-d\">${release_date.slice(0, 4)}</span>\n//        </div>\n//        </div>`\n//     }))).join('')\n// }\n\n\n\n// function clearCard() {\n  //   containerCardMovies.innerHTML = '';\n  // }\n  // btnWatched.addEventListener('click', clickOnBtnWatched)\n  // btnQueue.addEventListener('click', onTouchBtnQueue)\n\n  // function onTouchBtnQueue(e) {\n  //   e.preventDefault()\n  //   console.log(e.currentTarget);\n  // }\n  // function clickOnBtnWatched(e) {\n  //   e.preventDefault()\n  //   console.log(e.currentTarget);\n  // }"],"names":["$jXXA5","parcelRequire","$ce3726a01b8ab25a$var$containerCardMovies","document","querySelector","$ce3726a01b8ab25a$var$btnWatched","$ce3726a01b8ab25a$var$btnQueue","addEventListener","e","preventDefault","target","classList","contains","id","closest","dataset","movie","findTrendInfoForMovie","Number","$2Tlgh","createModal","window","onload","async","trendingMovies","loadTrending","innerHTML","$cky31","createMarkupMovies","ref","watched","JSON","parse","localStorage","getItem","$5mG4p","common","KEY_WATCHED","queue","KEY_QUEUE"],"version":3,"file":"library.f3043382.js.map"}