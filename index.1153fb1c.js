!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},t={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in t){var n=t[e];delete t[e];var i={id:e,exports:{}};return r[e]=i,n.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){t[e]=n},n.parcelRequired7c6=i);var o=i("bpxeT"),s=i("2TvXO"),a=i("3oq9d"),c=i("2oOFp"),u=i("1Xlm1"),f=i("4Nugj"),d=i("5118m");function l(){f.refs.loader.classList.add("active"),f.refs.containerCardMovies.classList.add("hide")}function v(){f.refs.loader.classList.remove("active"),f.refs.containerCardMovies.classList.remove("hide")}function p(){f.refs.notification.classList.add("is-visible")}function M(){f.refs.notification.classList.remove("is-visible")}(f=i("4Nugj")).refs.containerCardMovies.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("js-info")){var n=e.target.closest("[data-id]").dataset.id,r=(0,a.findTrendInfoForMovie)(Number(n));r||(r=(0,a.findInfoForMovie)(Number(n)),console.log(r)),(0,c.createModal)(r)}}));var g="";function h(){return h=e(o)(e(s).mark((function n(r){return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),g=r.currentTarget.elements.query.value,(0,u.resetPage)(),M(),w(),""===g&&p(),(0,u.resetPage)(),l(),(0,a.searchMovies)(g).then(function(){var n=e(o)(e(s).mark((function n(r){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.createMarkupMovies)(r);case 2:f.refs.containerCardMovies.innerHTML=e.sent,console.log(r);case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).finally(v);case 9:case"end":return n.stop()}}),n)}))),h.apply(this,arguments)}function w(){f.refs.containerCardMovies.innerHTML=""}f.refs.formBoxes.addEventListener("submit",(function(e){return h.apply(this,arguments)})),window.onload=e(o)(e(s).mark((function n(){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,(0,a.loadTrending)();case 3:return r=e.sent,v(),e.next=7,(0,d.createMarkupMovies)(r);case 7:f.refs.containerCardMovies.innerHTML=e.sent;case 8:case"end":return e.stop()}}),n)})));var m=new IntersectionObserver((function(n){n.forEach((function(n){if(n.isIntersecting){if(console.log("Intersecting"),!g)return;(0,a.searchMovies)(g).then((r=e(o)(e(s).mark((function n(r){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.refs.containerCardMovies,e.next=3,(0,d.createMarkupMovies)(r);case 3:e.t1=e.sent,e.t0.insertAdjacentHTML.call(e.t0,"beforeend",e.t1);case 5:case"end":return e.stop()}}),n)}))),function(e){return r.apply(this,arguments)}))}var r}))}),{rootMargin:"200px",threshold:.5});m.observe(document.querySelector(".scroll-guard"))}();
//# sourceMappingURL=index.1153fb1c.js.map
