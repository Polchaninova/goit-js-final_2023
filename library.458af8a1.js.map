{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,gFAMMC,EAAsBC,SAASC,cAAc,0BAC7CC,EAAaF,SAASC,cAAc,mBACpCE,EAAWH,SAASC,cAAc,iB,SAsBzBG,I,OAAAA,EAAfC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAA8BC,G,IAEZC,EAAVC,E,yEADNF,EAAEG,iBACID,EAA8D,QAApDD,EAAAG,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,OAAOC,qBAAa,IAApDT,IAAwD,G,UAClC,EAAAU,EAAAC,oBAAmBV,G,OAAzDZ,EAAoBuB,UAASC,EAAAC,K,4CAHFC,MAAAC,KAAAC,U,UAQdC,I,OAAAA,EAAfvB,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAEZC,EAARmB,E,yEADNpB,EAAEG,iBACIiB,EAA0D,QAAlDnB,EAAAG,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,OAAOY,mBAAW,IAAlDpB,IAAsD,G,UAC9B,EAAAU,EAAAC,oBAAmBQ,G,OAAzD9B,EAAoBuB,UAASC,EAAAC,K,4CAHJC,MAAAC,KAAAC,U,CA3B3B5B,EAAoBgC,iBAAiB,SAOrC,SAAqBtB,GAEnB,GADAA,EAAEG,iBACEH,EAAEuB,OAAOC,UAAUC,SAAS,WAAY,CAC1C,IAAMC,EAAS1B,EAAEuB,OAAOI,QAAQ,aAAaC,QAArCF,GACJG,GAAQ,EAAAC,EAAAC,uBAAsBC,OAAON,IACrCG,IACF,EAAAI,EAAAC,aAAYL,E,KAXlBM,OAAOC,OAASxC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,I,IACRsC,E,mFAAuB,EAAAP,EAAAQ,gB,cAAvBD,EAAcvB,EAAAC,K,UACkB,EAAAJ,EAAAC,oBAAmByB,G,OAAzD/C,EAAoBuB,UAASC,EAAAC,K,2CAc/BtB,EAAW6B,iBAAiB,S,SACEtB,G,OAAfL,EAAcqB,MAAAC,KAAAC,U,IAO7BxB,EAAS4B,iBAAiB,S,SACEtB,G,OAAbmB,EAAYH,MAAAC,KAAAC,U","sources":["src/library.js"],"sourcesContent":["import { findTrendInfoForMovie, loadTrending } from './js/findTrendInfo'\nimport { renderGenreMovies } from './js/genres'\nimport { createModal } from './js/modalRender'\nimport { createMarkupMovies } from './js/renderMarkup'\nimport { common } from './js/comon'\n\nconst containerCardMovies = document.querySelector('.container-card-movies')\nconst btnWatched = document.querySelector('.js-btn-watched')\nconst btnQueue = document.querySelector('.js-btn-queue')\n\n\ncontainerCardMovies.addEventListener('click', onClickCard)\n\nwindow.onload = async function () { //при загрузке страницы запустить сткрипт window.onload = вызов ф-и\n  const trendingMovies = await loadTrending()\n  containerCardMovies.innerHTML = await createMarkupMovies(trendingMovies);\n}\n\nfunction onClickCard(e) {\n  e.preventDefault()\n  if (e.target.classList.contains('js-info')) {\n    const { id } = e.target.closest('[data-id]').dataset;\n    let movie = findTrendInfoForMovie(Number(id));\n    if (movie) {\n      createModal(movie);\n    }\n  }\n}\n\nbtnWatched.addEventListener('click', onClickWatched);\nasync function onClickWatched(e) {\n  e.preventDefault();\n  const watched = JSON.parse(localStorage.getItem(common.KEY_WATCHED)) ?? [];\n  containerCardMovies.innerHTML = await createMarkupMovies(watched);\n}\n\n\nbtnQueue.addEventListener('click', onClickQueue);\nasync function onClickQueue(e) {\n  e.preventDefault();\n  const queue = JSON.parse(localStorage.getItem(common.KEY_QUEUE)) ?? [];\n  containerCardMovies.innerHTML = await createMarkupMovies(queue);\n}\n\n\n\n// async function createMarkupMovies(movies) {\n//   return (await Promise.all(movies.map(\n//     async ({ poster_path, title, genre_ids, release_date, id }) => {\n\n//       const UrlImg = poster_path// добавить заглушку если нет изображения!\n//         ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n//         : 'https://placehold.co/600x800'\n\n//       return `<div data-id='${id}' class=\"js-card flex\">\n//        <img class = \"img js-info\" src = \"${UrlImg}\" alt=\"${title}\">\n//        <div class=\"card-text\">\n//        <h2 class=\"title\">${title}</h2>\n//        <span class=\"text\">${await renderGenreMovies(genre_ids)}</span>\n//        <span class=\"text-d\">|</span>\n//        <span class=\"text-d\">${release_date.slice(0, 4)}</span>\n//        </div>\n//        </div>`\n//     }))).join('')\n// }\n\n\n\n// function clearCard() {\n  //   containerCardMovies.innerHTML = '';\n  // }\n  // btnWatched.addEventListener('click', clickOnBtnWatched)\n  // btnQueue.addEventListener('click', onTouchBtnQueue)\n\n  // function onTouchBtnQueue(e) {\n  //   e.preventDefault()\n  //   console.log(e.currentTarget);\n  // }\n  // function clickOnBtnWatched(e) {\n  //   e.preventDefault()\n  //   console.log(e.currentTarget);\n  // }"],"names":["$bpxeT","parcelRequire","$cecbdd76f2d3d4bd$var$containerCardMovies","document","querySelector","$cecbdd76f2d3d4bd$var$btnWatched","$cecbdd76f2d3d4bd$var$btnQueue","$cecbdd76f2d3d4bd$var$_onClickWatched","$parcel$interopDefault","$2TvXO","mark","_callee","e","ref","watched","preventDefault","JSON","parse","localStorage","getItem","$3bvD3","common","KEY_WATCHED","$5118m","createMarkupMovies","innerHTML","_ctx","sent","apply","this","arguments","$cecbdd76f2d3d4bd$var$_onClickQueue","queue","KEY_QUEUE","addEventListener","target","classList","contains","id","closest","dataset","movie","$3oq9d","findTrendInfoForMovie","Number","$2oOFp","createModal","window","onload","trendingMovies","loadTrending"],"version":3,"file":"library.458af8a1.js.map"}