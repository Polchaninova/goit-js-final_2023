{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,8ECEA,SAASC,IACPC,EAAAC,KAAKC,OAAOC,UAAUC,IAAI,UAC1BJ,EAAAC,KAAKI,oBAAoBF,UAAUC,IAAI,O,CAGzC,SAASE,IACPN,EAAAC,KAAKC,OAAOC,UAAUI,OAAO,UAC7BP,EAAAC,KAAKI,oBAAoBF,UAAUI,OAAO,O,CAG5C,SAASC,IACPR,EAAAC,KAAKQ,aAAaN,UAAUC,IAAI,a,CAGlC,SAASM,IACPV,EAAAC,KAAKQ,aAAaN,UAAUI,OAAO,a,EAjBrCP,EAAAF,EAAA,UDQAG,KAAKI,oBAAoBM,iBAAiB,SA+B1C,SAAqBC,GAEnB,GADAA,EAAEC,iBACED,EAAEE,OAAOX,UAAUY,SAAS,WAAY,CAC1C,IAAMC,EAASJ,EAAEE,OAAOG,QAAQ,aAAaC,QAArCF,GAEJG,GAAQ,EAAAC,EAAAC,uBAAsBC,OAAON,IACrCG,IAGFA,GAAQ,EAAAC,EAAAG,kBAAiBD,OAAON,IAChCQ,QAAQC,IAAIN,KAHZ,EAAAO,EAAAC,aAAYR,E,KArClB,IAAIS,EAAY,G,SAUDC,I,OAAAA,EAAfC,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAC,EAAwBrB,G,kEACtBA,EAAEC,iBACFe,EAAYhB,EAAEsB,cAAcC,SAASC,MAAMC,OAE3C,EAAAC,EAAAC,aACA7B,IACA8B,IAEkB,KAAdZ,GACFpB,KAEF,EAAA8B,EAAAC,aACAxC,KACA,EAAAqB,EAAAqB,cAAab,GACVc,KAAI,W,MAACZ,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAW,EAAOC,G,mFACgC,EAAAC,EAAAC,oBAAmBF,G,OAA9D5C,EAAAC,KAAKI,oBAAoB0C,UAASC,EAAAC,K,2DADvBL,G,gCAAR,IAGJM,QAAQ5C,G,2CAjBEuB,EAAQsB,MAAAC,KAAAC,U,CAoCvB,SAASb,IACPxC,EAAAC,KAAKI,oBAAoB0C,UAAY,E,CA7CvC/C,EAAAC,KAAKqD,UAAU3C,iBAAiB,U,SAQRC,G,OAATiB,EAAQsB,MAAAC,KAAAC,U,IANvBE,OAAOC,OAAS1B,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAW,I,IAERc,E,yEADN1D,I,UAC6B,EAAAqB,EAAAsC,gB,cAAvBD,EAAcT,EAAAC,KACpB3C,I,UAC2C,EAAAuC,EAAAC,oBAAmBW,G,OAA9DzD,EAAAC,KAAKI,oBAAoB0C,UAASC,EAAAC,K,2CA0CD,IAI7BU,EAAW,IAAIC,sBAAqB,SAAAC,GAE1CA,EAAQC,SAAQ,SAAAC,GACZ,GAAIA,EAAMC,eAAgB,CAExB,GADAxC,QAAQC,IAAI,iBACPG,EACH,QAEF,EAAAU,EAAA2B,aAAYrC,GACTc,M,EAAKZ,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAW,EAAAuB,G,IAAStB,E,kEAAAA,EAAMsB,EAANtB,OACX5C,EAAAC,KAAKI,oBAAoB8D,mBAAmB,aAAa,EAAAtB,EAAAC,oBAAmBF,I,yFAD3E,I,OAbG,CACdwB,WAAY,QACZC,UAAW,KAmBbV,EAASW,QAAQC,SAASC,cAAc,iB","sources":["src/index.js","src/js/showLoader.js"],"sourcesContent":["import { findInfoForMovie, findTrendInfoForMovie, loadTrending, searchMovies } from './js/findTrendInfo'\nimport { createModal } from './js/modalRender'\nimport { fetchMovies, resetPage } from './js/movie-API'\nimport { refs } from './js/refs'\nimport { createMarkupMovies } from './js/renderMarkup'\nimport { hideLoader, removeNotification, showLoader, showNotification } from './js/showLoader'\n\n\nrefs.containerCardMovies.addEventListener('click', onClickCard)\nlet movieName = '';\n\nrefs.formBoxes.addEventListener('submit', onSearch)\n\nwindow.onload = async function () { //при загрузке страницы запустить сткрипт window.onload = вызов ф-и\n  showLoader()\n  const trendingMovies = await loadTrending()\n  hideLoader()\n  refs.containerCardMovies.innerHTML = await createMarkupMovies(trendingMovies);\n}\nasync function onSearch(e) {\n  e.preventDefault()\n  movieName = e.currentTarget.elements.query.value;\n\n  resetPage()\n  removeNotification()\n  clearCard()\n\n  if (movieName === \"\") {\n    showNotification()\n  }\n  resetPage()\n  showLoader()\n  searchMovies(movieName)\n    .then(async (movies) => {\n      refs.containerCardMovies.innerHTML = await createMarkupMovies(movies)\n    })\n    .finally(hideLoader)\n}\n\nfunction onClickCard(e) {\n  e.preventDefault()\n  if (e.target.classList.contains('js-info')) {\n    const { id } = e.target.closest('[data-id]').dataset;\n\n    let movie = findTrendInfoForMovie(Number(id));\n    if (movie) {\n      createModal(movie);\n    } else {\n      movie = findInfoForMovie(Number(id));\n      console.log(movie);\n      createModal(movie);\n    }\n  }\n}\n\nfunction clearCard() {\n  refs.containerCardMovies.innerHTML = '';\n}\n//2 открытия ресурса при прокрутки страницы\nconst options = {\n  rootMargin: \"200px\",\n  threshold: 0.5,\n};\nconst observer = new IntersectionObserver(entries => {\n\nentries.forEach(entry => {\n    if (entry.isIntersecting) { // если сейчас ЕЛЕМЕНТ вошел во вьюпорт\n      console.log(\"Intersecting\");\n      if (!movieName) {\n        return\n      }\n      fetchMovies(movieName)\n        .then(async ({ movies }) => {\n            refs.containerCardMovies.insertAdjacentHTML('beforeend', createMarkupMovies(movies))\n        })\n    }\n  }\n  )\n}, options);\n\nobserver.observe(document.querySelector('.scroll-guard'))\n\n\n\n\n// (await Promise.all(movie.map(\n//   async ({ poster_path, title, genre_ids, vote_average, vote_count, popularity, original_title, overview }) => {\n\n//     const UrlImg = poster_path// добавить заглушку если нет изображения!\n//       ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n//       : 'https://placehold.co/600x800'ret\n\n","import { refs } from \"./refs\";\n\nfunction showLoader() {\n  refs.loader.classList.add('active')\n  refs.containerCardMovies.classList.add('hide')\n}\n\nfunction hideLoader() {\n  refs.loader.classList.remove('active')\n  refs.containerCardMovies.classList.remove('hide')\n}\n\nfunction showNotification() {\n  refs.notification.classList.add(\"is-visible\");\n}\n\nfunction removeNotification() {\n  refs.notification.classList.remove(\"is-visible\");\n}\nexport { showLoader, hideLoader, showNotification, removeNotification }"],"names":["$bpxeT","parcelRequire","$51864fe40803e717$export$56525cbb1fcd885c","$4Nugj","refs","loader","classList","add","containerCardMovies","$51864fe40803e717$export$5cee2c2772922923","remove","$51864fe40803e717$export$f7dc72e91f29c7d7","notification","$51864fe40803e717$export$92eb0ea44f8c9242","addEventListener","e","preventDefault","target","contains","id","closest","dataset","movie","$3oq9d","findTrendInfoForMovie","Number","findInfoForMovie","console","log","$2oOFp","createModal","$b8f9b7833fa37166$var$movieName","$b8f9b7833fa37166$var$_onSearch","$parcel$interopDefault","$2TvXO","mark","_callee1","currentTarget","elements","query","value","$1Xlm1","resetPage","$b8f9b7833fa37166$var$clearCard","searchMovies","then","_callee","movies","$5118m","createMarkupMovies","innerHTML","_ctx","sent","finally","apply","this","arguments","formBoxes","window","onload","trendingMovies","loadTrending","$b8f9b7833fa37166$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","fetchMovies","param","insertAdjacentHTML","rootMargin","threshold","observe","document","querySelector"],"version":3,"file":"index.73da7f79.js.map"}